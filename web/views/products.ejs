<!DOCTYPE html>
<html lang="en">
<!-- HEAD -->
<%- include('partials/head', {title: title }) %>

    <body>
        <!-- HEADER -->
        <%- include('partials/headNavbar') %>
            <div class="title">
                <h1>NUESTROS <br>PRODUCTOS</h1>
            </div>

            <section class="allProducts">
                <% products.forEach(function(section, index) { %>
                    <div class="category">
                        <h3>
                            <%= section.category.toUpperCase()%>
                        </h3>
                        <div class="allItems">
                            <% section.product.forEach(item=>{ %>
                                <% if(item.id==1 ) { %>
                                    <button type="button" class="button-more <%= index %>" onclick="showMore(this)">Ver
                                        mas</button>
                                    <% } else if(item.id> 1 && item.id <= 4) { %>

                                            <div class="item">
                                                <a href="/products/detail/<%= section.category %>/<%= item.id %>">
                                                    <img src="/images/category/<%= section.category %>/<%= item.img %>"
                                                        alt="">
                                                    <h5>Lorem ipsum dolor sit, amet </h5>
                                                    <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit.
                                                        Incidunt fuga expedita quae, perferendis voluptatem voluptas
                                                        officiis iste harum voluptate ut excepturi et enim suscipit
                                                        iusto veniam repudiandae amet, debitis alias!</p>
                                                </a>
                                            </div>

                                            <% } else { %>
                                                <div class="item more i-<%= index %>">
                                                    <a href="/products/detail/<%= section.category %>/<%= item.id %>">
                                                        <img src="/images/category/<%= section.category %>/<%= item.img %>"
                                                            alt="">
                                                        <h5>Lorem ipsum dolor sit, amet </h5>
                                                        <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit.
                                                            Incidunt fuga expedita quae, perferendis voluptatem voluptas
                                                            officiis iste harum voluptate ut excepturi et enim suscipit
                                                            iusto veniam repudiandae amet, debitis alias!</p>
                                                    </a>
                                                </div>
                                                <% } %>

                                                    <% }) %>

                        </div>
                    </div>
                    <% }) %>
            </section>

    </body>
    <script>
        const clicked = [
            {
                id: 0,
                clicked: false
            },
            {
                id: 1,
                clicked: false
            }
            ,
            {
                id: 2,
                clicked: false
            }
            ,
            {
                id: 3,
                clicked: false
            }
            ,
            {
                id: 4,
                clicked: false
            }
        ]
        function showMore(obj) {
            let name = obj.className;
            let id = name.split(' ')[1]
            const className = "i-" + id
            for (let i = 0; i < clicked.length; i++) {
                if (clicked[i].clicked == false) {
                    obj.textContent = "Ver menos";
                    clicked[i].clicked = true
                    var elements = document.getElementsByClassName(className)
                    for (let i = 0; i < elements.length; i++) {
                        elements[i].style.display = "inline";
                        elements[i].style.marginTop = "20px";
                    }
                } else {
                    obj.textContent = "Ver mas";
                    clicked[i].clicked = false
                    var elements = document.getElementsByClassName(className)
                    for (let i = 0; i < elements.length; i++) {
                        elements[i].style.display = "none";

                    }

                }
            }




        }
    </script>

</html>